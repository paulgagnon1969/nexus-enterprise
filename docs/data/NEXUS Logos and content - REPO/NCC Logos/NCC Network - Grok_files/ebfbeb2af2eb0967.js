(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,676452,e=>{"use strict";e.s(["useHighlightsStore",()=>n]);var s=e.i(868275),t=e.i(486492),i=e.i(564448),r=e.i(364778),l=e.i(390418),o=e.i(605653);class a{constructor(e,l,o){var a=this;(0,s._)(this,"set",void 0),(0,s._)(this,"get",void 0),(0,s._)(this,"store",void 0),(0,s._)(this,"stories",void 0),(0,s._)(this,"isLoading",void 0),(0,s._)(this,"error",void 0),(0,s._)(this,"nextCursor",void 0),(0,s._)(this,"storyReactions",void 0),(0,s._)(this,"sourcePostsByStoryId",void 0),(0,s._)(this,"animatedStoryIds",void 0),(0,s._)(this,"mergedStoryIds",void 0),(0,s._)(this,"setStories",void 0),(0,s._)(this,"setIsLoading",void 0),(0,s._)(this,"setError",void 0),(0,s._)(this,"setNextCursor",void 0),(0,s._)(this,"setStoryReaction",void 0),(0,s._)(this,"setSourcePostsByStoryId",void 0),(0,s._)(this,"getSourcePostsByStoryId",void 0),(0,s._)(this,"markStoryAnimated",void 0),(0,s._)(this,"hasStoryAnimated",void 0),(0,s._)(this,"likeStory",void 0),(0,s._)(this,"dislikeStory",void 0),(0,s._)(this,"fetchStories",void 0),(0,s._)(this,"fetchMoreStories",void 0),(0,s._)(this,"getStory",void 0),(0,s._)(this,"reset",void 0),this.set=e,this.get=l,this.store=o,this.stories=[],this.isLoading=!1,this.error=null,this.nextCursor=void 0,this.storyReactions={},this.sourcePostsByStoryId={},this.animatedStoryIds=new Set,this.mergedStoryIds={},this.setStories=(0,i.assign)(this.set,"stories"),this.setIsLoading=(0,i.assign)(this.set,"isLoading"),this.setError=(0,i.assign)(this.set,"error"),this.setNextCursor=(0,i.assign)(this.set,"nextCursor"),this.setStoryReaction=(e,s)=>{this.set(t=>({storyReactions:{...t.storyReactions,[e]:s}}))},this.setSourcePostsByStoryId=(e,s)=>{this.set(t=>({sourcePostsByStoryId:{...t.sourcePostsByStoryId,[e]:s}}))},this.getSourcePostsByStoryId=e=>this.get().sourcePostsByStoryId[e],this.markStoryAnimated=e=>{let s=this.get();if(!s.animatedStoryIds.has(e)){let t=new Set(s.animatedStoryIds);t.add(e),this.set({animatedStoryIds:t})}},this.hasStoryAnimated=e=>this.get().animatedStoryIds.has(e),this.likeStory=e=>{let s=this.get().storyReactions[e];this.setStoryReaction(e,"liked"===s?null:"liked")},this.dislikeStory=e=>{let s=this.get().storyReactions[e];this.setStoryReaction(e,"disliked"===s?null:"disliked")},this.fetchStories=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return a.setIsLoading(!0),a.setError(null),r.highlightsApi.highlightsGetStories({limit:e}).then(e=>{let s=a.get(),t=e.stories||[],i=new Set(s.stories.map(e=>e.storyId)),r=t.filter(e=>!i.has(e.storyId));a.set({stories:[...r,...s.stories],nextCursor:e.nextCursor,isLoading:!1})}).catch(e=>{let s=e instanceof Error?e:Error("Failed to fetch highlights");a.set({error:s,isLoading:!1}),(0,t.logError)("highlights-store:fetchStories",e)})},this.fetchMoreStories=()=>{let e=this.get();return e.isLoading||!e.nextCursor?Promise.resolve():(this.setIsLoading(!0),this.setError(null),r.highlightsApi.highlightsGetStories({limit:10,cursor:e.nextCursor}).then(s=>{let t=s.stories||[],i=new Set(e.stories.map(e=>e.storyId)),r=t.filter(e=>!i.has(e.storyId));this.set({stories:[...e.stories,...r],nextCursor:s.nextCursor,isLoading:!1})}).catch(e=>{let s=e instanceof Error?e:Error("Failed to load more highlights");this.set({error:s,isLoading:!1}),(0,t.logError)("highlights-store:loadMore",e)}))},this.getStory=(e,s)=>{var i;let l=this.get(),o=l.mergedStoryIds[e]||e,a=l.stories.find(e=>e.storyId===o),n="HIGHLIGHTS_SOURCE_HIGHLIGHTS"===s;return a&&(n?null==(i=a.article)?void 0:i.content:a.grokAnalysis)?Promise.resolve(a):r.highlightsApi.highlightsGetStory({storyId:e,source:s}).then(s=>{let t=s.story;if(!t)throw Error("Story not found");return this.set(s=>{let i={};t.storyId&&t.storyId!==e&&(i.mergedStoryIds={...s.mergedStoryIds,[e]:t.storyId});let r=t.storyId||e,l=s.stories.findIndex(e=>e.storyId===r);if(l>=0){let e=[...s.stories];e[l]=t,i.stories=e}else i.stories=[...s.stories,t];return i}),t}).catch(e=>{throw(0,t.logError)("highlights-store:getStory",e),e})},this.reset=()=>{this.set({stories:[],isLoading:!1,error:null,nextCursor:void 0,sourcePostsByStoryId:{},mergedStoryIds:{}})}}}let n=(0,l.create)()((0,o.devtools)((0,o.persist)((e,s,t)=>new a(e,s,t),{name:"highlights-storage",partialize:e=>({storyReactions:e.storyReactions})}),{name:"useHighlightsStore"}))},398459,112089,e=>{"use strict";e.s(["HighlightsSection",()=>P,"HighlightsSectionSimple",()=>R,"HighlightsStoryRow",()=>T],398459);var s=e.i(247276),t=e.i(824027),i=e.i(981176);e.i(685846);var r=e.i(415860),l=e.i(417950),o=e.i(296451),a=e.i(19945),n=e.i(883440),c=e.i(946032),d=e.i(235289);e.i(916390);var h=e.i(572848),u=e.i(763578),g=e.i(410289),m=e.i(723008),x=e.i(50636),y=e.i(920958),f=e.i(486492),p=e.i(165275),v=e.i(9885),S=e.i(724499),I=e.i(211959),j=e.i(421593);e.i(18545);var b=e.i(116212),N=e.i(713216),k=e.i(676452);e.s(["useEngagingPosts",()=>L,"useLoadDiscussionPosts",()=>E,"useSourcePosts",()=>H],112089);var w=e.i(364778);e.i(298616);var _=e.i(111669),C=e.i(910503);function H(e,s){let t=(0,k.useHighlightsStore)();return(0,C.useQuery)({queryKey:["highlights","source-posts",e,s],queryFn:async()=>{var i,r;if(!e)return[];let l=(null==(r=(await w.highlightsApi.highlightsGetSourcePosts({body:{storyIds:[e],source:s}})).storyPosts)||null==(i=r[0])?void 0:i.posts)||[];return t.setSourcePostsByStoryId(e,l),l},enabled:!!e,staleTime:3e5,gcTime:6e5,initialData:()=>e?t.getSourcePostsByStoryId(e):[]})}function L(e,s){return(0,C.useQuery)({queryKey:["highlights","engaging-posts",e,s],queryFn:async()=>e&&(await w.highlightsApi.highlightsGetEngagingPosts({storyId:e,source:s})).engagingPosts||[],enabled:!!e,staleTime:3e5,gcTime:6e5})}function E(e,s){var t;let i=(0,_.useInfiniteQuery)({queryKey:["highlights","discussion-posts",e,s],queryFn:async t=>{let{pageParam:i}=t;if(!e)throw Error("Story ID is required");let r=await w.highlightsApi.highlightsGetDiscussionPosts({storyId:e,limit:20,cursor:i,source:s});return{discussionPosts:r.discussionPosts||[],nextCursor:r.nextCursor||void 0}},initialPageParam:void 0,getNextPageParam:e=>e.nextCursor,enabled:!!e,staleTime:3e5,gcTime:6e5});return{discussionPosts:(null==(t=i.data)?void 0:t.pages.flatMap(e=>e.discussionPosts))||[],isLoading:i.isLoading,error:i.error,hasMore:i.hasNextPage,loadMore:i.fetchNextPage,isFetchingNextPage:i.isFetchingNextPage}}var A=e.i(555309);function T(e){var t,i,l;let{story:d,onClick:g,borderless:m,mode:N="embedded",onImageError:w}=e,[_,C]=(0,j.useState)(!1),L=(0,y.useLogEvent)(),{t:E}=(0,b.useTranslation)("chat"),{user:T}=(0,h.useSession)(),P=(0,k.useHighlightsStore)(e=>e.storyReactions),R=(0,x.useFeatureFlags)(),{data:M=[]}=H(d.storyId,d.source),B=P[d.storyId||""],D=d.createTime?(0,v.formatCompactTime)(d.createTime):void 0,U=(0,j.useMemo)(()=>M.reduce((e,s)=>{var t;return e+((null==(t=s.publicMetrics)?void 0:t.viewCount)||s.viewCount||0)},0),[M]),z=(0,j.useMemo)(()=>M.reduce((e,s)=>{var t;return e+((null==(t=s.publicMetrics)?void 0:t.likeCount)||0)},0),[M]),G=(0,j.useMemo)(()=>{let e=new Map;return M.forEach(s=>{if(s.username){var t;let i=(null==(t=s.publicMetrics)?void 0:t.likeCount)||0,r=e.get(s.username);r?i>r.maxLikeCount&&(r.maxLikeCount=i,r.postId=s.postId,!r.verifiedType&&s.verifiedType&&(r.verifiedType=s.verifiedType)):e.set(s.username,{name:s.name||"",username:s.username||"",profileImageUrl:s.profileImageUrl,verifiedType:s.verifiedType,maxLikeCount:i,postId:s.postId})}}),Array.from(e.values()).sort((e,s)=>s.maxLikeCount-e.maxLikeCount)},[M]),O=(0,j.useCallback)(e=>{if(!d.storyId)return void(0,f.logError)("highlights-story-card:HighlightsStoryRow:handleClick","storyId is undefined",{story:JSON.stringify(d)});L("highlights_story_tapped",d.storyId,{location:"highlights-story-card:HighlightsStoryRow:click",storyId:d.storyId,title:d.title||""}),e.metaKey||e.ctrlKey||(e.preventDefault(),g(d.storyId))},[d,L,g]),F=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!d.storyId)return;let s=k.useHighlightsStore.getState();L("highlight_story_liked",d.storyId,{location:"highlights-story-card:HighlightsStoryRow:handleLike",storyId:d.storyId,title:d.title||"",wasAlreadyLiked:String("liked"===B)}),s.likeStory(d.storyId)},[d.storyId,d.title,B,L]),X=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!d.storyId)return;let s=k.useHighlightsStore.getState();L("highlight_story_disliked",d.storyId,{location:"highlights-story-card:HighlightsStoryRow:handleDislike",storyId:d.storyId,title:d.title||"",wasAlreadyDisliked:String("disliked"===B)}),s.dislikeStory(d.storyId)},[d.storyId,d.title,B,L]),W=(0,j.useMemo)(()=>G.slice(0,3),[G]),V="minimal"===N,Q="HIGHLIGHTS_SOURCE_PHOENIX"===d.source,q=R.HIGHLIGHTS_ONLY_TEXT,K=(null==T||null==(t=T.email)?void 0:t.endsWith("@x.ai"))||(null==T||null==(i=T.email)?void 0:i.endsWith("@teachx.ai")),Y=Q&&K;return(0,s.jsx)(S.Link,{route:Q?{page:"trends",storyId:d.storyId}:{page:"highlights",storyId:d.storyId},className:(0,I.cn)("w-full",V?["block rounded-xl transition-colors","group cursor-pointer"]:["grid gap-y-2 gap-x-4",q?"grid-cols-[1fr] grid-rows-[auto]":"grid-cols-[1fr_fit-content(200px)] grid-rows-[auto_24px]","overflow-hidden",m?"bg-transparent rounded-2xl":"border rounded-3xl bg-surface-l1","hover:bg-surface-l4-hover dark:hover:bg-surface-l2","ps-4 pe-3 py-3",!q&&"min-h-[90px]","text-start"]),onClick:O,children:V?(0,s.jsxs)(A.motion.div,{className:(0,I.cn)("flex gap-4 items-center px-3 py-4","rounded-xl bg-surface-base","hover:bg-surface-l1-hover/80 hover:backdrop-blur-sm hover:shadow-lg"),variants:{rest:{scale:1,zIndex:1},hover:{scale:1.08,zIndex:10}},initial:"rest",whileHover:"hover",transition:{duration:.1,ease:"easeOut"},children:[!q&&d.thumbnailImageUrl&&!_&&(0,s.jsx)(A.motion.div,{className:"shrink-0 w-[96px] h-[64px] rounded-xl overflow-hidden origin-right",variants:{rest:{scale:1},hover:{scale:1.35}},transition:{duration:.1,ease:"easeOut"},children:(0,s.jsx)("img",{src:d.thumbnailImageUrl,alt:d.title||E("highlights-story-media","Story media"),className:"w-full h-full object-cover",onError:()=>{C(!0),w&&d.storyId&&w(d.storyId)}})}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsx)("h3",{className:"text-primary font-normal line-clamp-2 leading-tight m-0",children:d.title}),q&&Y&&(0,s.jsx)(c.XLogoIcon,{className:"size-3.5 text-secondary shrink-0 mt-0.5"})]})}),!q&&D&&(0,s.jsx)("div",{className:"flex flex-row gap-2 items-center mt-2",children:(0,s.jsx)("div",{className:"text-secondary text-sm",children:D})})]})]}):(0,s.jsx)("div",{className:"flex gap-4 flex-1",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 overflow-hidden col-span-1 row-span-1",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsx)("h3",{className:"text-primary font-semibold text-lg line-clamp-2 leading-tight m-0",children:d.title}),q&&Y&&(0,s.jsx)(c.XLogoIcon,{className:"size-3.5 text-secondary shrink-0 mt-1"})]}),!q&&("authors"===N?(0,s.jsxs)(s.Fragment,{children:[d.summary&&(0,s.jsx)("p",{className:"text-secondary text-sm line-clamp-2 leading-snug m-0 mt-1",children:d.summary}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-auto overflow-hidden",children:[(0,s.jsx)("div",{className:"flex gap-1.5 flex-nowrap overflow-hidden flex-shrink min-w-0",children:W.map((e,t)=>(e.name,e.username,e.profileImageUrl,e.verifiedType,e.verifiedType,(0,s.jsxs)("div",{className:(0,I.cn)("flex items-center gap-1.5","ps-1 pe-2 py-1 rounded-full","bg-surface-l2 hover:bg-surface-l3","border border-border-l1","cursor-pointer transition-all","flex-shrink-0"),onClick:s=>{s.stopPropagation(),s.preventDefault(),e.postId&&(L("highlight_author_pill_clicked",e.postId,{location:"highlights-story-card:HighlightsStoryRow:authorPill",storyId:d.storyId||"",username:e.username,postId:e.postId}),window.open("https://x.com/".concat(e.username,"/status/").concat(e.postId),"_blank"))},children:[(0,s.jsx)("div",{className:"relative size-5 rounded-full bg-surface-l3 overflow-hidden flex-shrink-0",children:e.profileImageUrl?(0,s.jsx)("img",{src:e.profileImageUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:(0,I.cn)("w-full h-full flex items-center justify-center","bg-gradient-to-br from-purple-500/30 via-blue-500/30 to-pink-500/30","text-primary text-[10px] font-medium"),children:e.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("span",{className:"text-xs text-primary font-medium",children:["@",e.username]})]},e.username)))}),G.length>W.length&&(0,s.jsx)("div",{className:(0,I.cn)("flex items-center gap-1.5 flex-shrink-0"),children:(0,s.jsxs)("span",{className:"text-xs text-secondary font-medium whitespace-nowrap",children:["+",E("highlights-more-authors",{defaultValue_one:"{{count}} more",defaultValue_other:"{{count}} more",count:G.length-W.length})]})})]})]}):(0,s.jsxs)(s.Fragment,{children:[G.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-secondary text-sm mt-1",children:[(0,s.jsxs)("span",{children:["@",null==(l=G[0])?void 0:l.username]}),G.length>1&&(0,s.jsxs)("span",{className:"text-xs",children:["+",E("highlights-more-authors",{defaultValue_one:"{{count}} more",defaultValue_other:"{{count}} more",count:G.length-1})]})]}),d.summary&&(0,s.jsx)("p",{className:"text-secondary text-sm line-clamp-2 leading-snug m-0",children:d.summary})]}))]}),!q&&(0,s.jsxs)("div",{className:"flex items-center h-min gap-4 text-secondary self-end text-xs col-span-1 row-span-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:F,className:(0,I.cn)("liked"===B&&"text-primary"),"aria-label":"Like this story",children:(0,s.jsx)(n.ThumbsUpIcon,{className:"size-4"})}),(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:X,className:(0,I.cn)("disliked"===B&&"text-primary"),"aria-label":"Dislike this story",children:(0,s.jsx)(a.ThumbsDownIcon,{className:"size-4"})}),Y&&(0,s.jsx)(c.XLogoIcon,{className:"size-3.5 text-secondary"})]}),U>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.ChartBar,{className:"size-4 scale-x-[-1] rotate-90"}),(0,s.jsx)("span",{children:(0,p.formatNumber)(U)})]}),z>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.HeartIcon,{className:"size-4"}),(0,s.jsx)("span",{children:(0,p.formatNumber)(z)})]}),(0,s.jsx)("span",{children:D})]})]})})})}function P(e){var r,l,o,c,h,x;let{className:S,story:w}=e,{t:_}=(0,b.useTranslation)("chat"),C=(0,y.useLogEvent)(),A=(0,j.useRef)(null),T=(0,j.useRef)(!1),P=(0,k.useHighlightsStore)(e=>e.storyReactions),R="HIGHLIGHTS_SOURCE_PHOENIX"===w.source,{discussionPosts:M,isLoading:B,hasMore:D,loadMore:U}=E(w.storyId,w.source),z=(0,j.useRef)(null),G=P[w.storyId||""],{data:O=[],isLoading:F}=H(w.storyId,w.source),{data:X=[]}=L(w.storyId,w.source),W=(0,j.useMemo)(()=>{var e,s;let t=new Set;return null==(s=w.article)||null==(e=s.cardAttachments)||e.forEach(e=>{try{let s=JSON.parse(e);"x_posts_card"===s.cardType&&Array.isArray(s.post_ids)&&s.post_ids.forEach(e=>t.add(e))}catch(e){}}),t},[null==(r=w.article)?void 0:r.cardAttachments]),V=(0,j.useMemo)(()=>[...O].filter(e=>!e.postId||!W.has(e.postId)).sort((e,s)=>{var t,i;return((null==(t=s.publicMetrics)?void 0:t.likeCount)||0)-((null==(i=e.publicMetrics)?void 0:i.likeCount)||0)}),[O,W]),Q=(0,j.useRef)(null),[q,K]=(0,j.useState)(!0),[Y,J]=(0,j.useState)(!1),[Z,$]=(0,j.useState)(!1),[ee,es]=(0,j.useState)(!1);(0,j.useEffect)(()=>{Q.current&&V.length>0&&J(Q.current.scrollHeight>392)},[V]);let et=(0,j.useMemo)(()=>{if(F||0===O.length)return;let e=O.reduce((e,s)=>Math.max(e,new Date(s.createTime||0).getTime()),0);return(0,v.formatCompactTime)(new Date(e).toISOString())},[O,F]),ei=(0,j.useMemo)(()=>{let e=new Set(O.map(e=>e.postId).filter(Boolean));return X.filter(s=>!e.has(s.postId))},[X,O]),er=(0,j.useMemo)(()=>{let e=[...ei,...M],s=new Set;return e.filter(e=>!(!e.postId||s.has(e.postId))&&(s.add(e.postId),!0))},[ei,M]),el=(0,j.useCallback)(e=>{z.current&&z.current.disconnect(),e&&(z.current=new IntersectionObserver(e=>{let[s]=e;s&&s.isIntersecting&&D&&!B&&U().catch((0,f.createLogError)("highlights-story-card:loadMoreDiscussionPosts"))},{threshold:.1,rootMargin:"0px 0px 200px 0px"}),z.current.observe(e))},[D,B,U]);(0,j.useEffect)(()=>()=>{z.current&&z.current.disconnect()},[]);let eo=w.coverImageUrl;(0,j.useEffect)(()=>{$(!1)},[eo]);let ea=(0,j.useMemo)(()=>O.reduce((e,s)=>{var t;return e+((null==(t=s.publicMetrics)?void 0:t.viewCount)||s.viewCount||0)},0),[O]);(0,j.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!T.current&&(T.current=!0,C("highlights_story_impression",w.storyId||"",{location:"highlights-section:HighlightsSection:impression",storyId:w.storyId||"",title:w.title||""}))})},{threshold:0});return A.current&&e.observe(A.current),()=>{e.disconnect()}},[w.storyId,w.title,C]);let en=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!w.storyId)return;let s=k.useHighlightsStore.getState();C("highlight_story_liked",w.storyId,{location:"highlights-section:HighlightsSection:handleLike",storyId:w.storyId,title:w.title||"",wasAlreadyLiked:String("liked"===G)}),s.likeStory(w.storyId)},[w.storyId,w.title,G,C]),ec=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!w.storyId)return;let s=k.useHighlightsStore.getState();C("highlight_story_disliked",w.storyId,{location:"highlights-section:HighlightsSection:handleDislike",storyId:w.storyId,title:w.title||"",wasAlreadyDisliked:String("disliked"===G)}),s.dislikeStory(w.storyId)},[w.storyId,w.title,G,C]),ed=(0,j.useCallback)(e=>{C("highlights_post_link_clicked",e,{location:"highlights-section:HighlightsSection:handlePostClick",storyId:w.storyId||"",postId:e})},[w.storyId,C]);return(0,s.jsxs)("section",{ref:A,id:w.storyId||void 0,className:(0,I.cn)("w-full scroll-mt-4",d.QUERY_BAR_MAX_WIDTH_CLASS,S),children:[(eo||F)&&!ee&&(0,s.jsxs)("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden",children:[F&&!eo?(0,s.jsx)(g.Skeleton,{className:"w-full aspect-video"}):null,eo&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:eo,alt:"","aria-hidden":"true",className:(0,I.cn)("absolute inset-0 w-full h-full object-cover blur-3xl scale-110 opacity-60",!Z&&"invisible")}),(0,s.jsx)("img",{src:eo,alt:w.title||_("highlights-story-image","Story image"),className:(0,I.cn)("relative w-full h-auto max-h-[500px] object-contain",!Z&&"invisible absolute"),onLoad:()=>$(!0),onError:()=>es(!0)})]})]}),(0,s.jsx)("h2",{className:"text-primary font-semibold text-2xl mb-2 m-0",children:w.title}),ei.length>0&&(0,s.jsx)("div",{className:"mb-4 space-y-3",children:w.summary&&(0,s.jsx)("p",{className:"mb-4 m-0",children:w.summary})}),!ei.length&&w.summary&&(0,s.jsx)("p",{className:"mb-4 m-0",children:w.summary}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:en,className:(0,I.cn)("liked"===G&&"text-primary"),"aria-label":_("highlights-like-story","Like this story"),children:(0,s.jsx)(n.ThumbsUpIcon,{className:"size-4"})}),(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:ec,className:(0,I.cn)("disliked"===G&&"text-primary"),"aria-label":_("highlights-dislike-story","Dislike this story"),children:(0,s.jsx)(a.ThumbsDownIcon,{className:"size-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-secondary text-sm",children:[ea>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:_("highlights-views",{count:ea,formattedCount:(0,p.formatNumber)(ea),defaultValue_one:"{{formattedCount}} view",defaultValue_other:"{{formattedCount}} views"})}),(0,s.jsx)("span",{children:"Â·"})]}),et&&(0,s.jsx)("span",{children:et})]})]}),(R?w.grokAnalysis:null==(l=w.article)?void 0:l.content)&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(N.MessageBubble,{isUser:!1,children:(0,s.jsx)(t.MemoizedMarkdown,{sender:"assistant",shouldRenderHtml:!0,webSearchResults:null==(o=w.article)?void 0:o.webResults,xposts:null==(c=w.article)?void 0:c.xPosts,cardAttachmentsJson:null==(h=w.article)?void 0:h.cardAttachments,children:R?w.grokAnalysis||"":(null==(x=w.article)?void 0:x.content)||""})})}),V.length>0&&(0,s.jsxs)("div",{className:(0,I.cn)("mb-8",q&&Y&&"max-h-96 overflow-hidden relative"),ref:Q,children:[(0,s.jsx)("div",{className:"flex flex-col overflow-hidden items-center",children:(0,s.jsx)(i.XPostFeed,{xPosts:V,mode:"card",disabled:q,onPostClick:e=>{q?K(!1):ed(e)}})}),q&&Y&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-surface-base to-transparent flex items-end justify-center pb-2",children:(0,s.jsx)(u.Button,{variant:"secondary",size:"sm",onClick:()=>K(!1),children:_("highlights.show-more","Show more")})})]}),er.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-primary font-semibold text-lg mb-4",children:_("highlights-what-the-world-is-saying","What the world is saying")}),(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,s.jsx)(i.XPostFeed,{xPosts:er,mode:"card",onPostClick:e=>ed(e)}),(0,s.jsx)("div",{ref:el,className:"w-full h-1"}),B&&(0,s.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,s.jsx)(m.Spinner,{size:"sm"})})]})]})]})}function R(e){var r,l,o,c,h,m,x;let{className:f,story:p,isArticleLoading:S=!1}=e,{t:w}=(0,b.useTranslation)("chat"),_=(0,y.useLogEvent)(),C=(0,j.useRef)(null),L=(0,j.useRef)(!1),E=(0,k.useHighlightsStore)(e=>e.storyReactions),A="HIGHLIGHTS_SOURCE_PHOENIX"===p.source,T=E[p.storyId||""],{data:P=[],isLoading:R}=H(p.storyId,p.source),B=(0,j.useMemo)(()=>{var e,s;let t=new Set;return null==(s=p.article)||null==(e=s.cardAttachments)||e.forEach(e=>{try{let s=JSON.parse(e);"x_posts_card"===s.cardType&&Array.isArray(s.post_ids)&&s.post_ids.forEach(e=>t.add(e))}catch(e){}}),t},[null==(r=p.article)?void 0:r.cardAttachments]),D=(0,j.useMemo)(()=>[...P].filter(e=>!e.postId||!B.has(e.postId)).sort((e,s)=>{var t,i;return((null==(t=s.publicMetrics)?void 0:t.likeCount)||0)-((null==(i=e.publicMetrics)?void 0:i.likeCount)||0)}),[P,B]),[U,z]=(0,j.useState)(!1),[G,O]=(0,j.useState)(!1),F=(0,j.useMemo)(()=>{if(R||0===P.length)return;let e=P.reduce((e,s)=>Math.max(e,new Date(s.createTime||0).getTime()),0);return(0,v.formatCompactTime)(new Date(e).toISOString())},[P,R]),X=p.coverImageUrl;(0,j.useEffect)(()=>{z(!1)},[X]),(0,j.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!L.current&&(L.current=!0,_("highlights_story_impression",p.storyId||"",{location:"highlights-section:HighlightsSectionV2:impression",storyId:p.storyId||"",title:p.title||""}))})},{threshold:0});return C.current&&e.observe(C.current),()=>{e.disconnect()}},[p.storyId,p.title,_]);let W=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!p.storyId)return;let s=k.useHighlightsStore.getState();_("highlight_story_liked",p.storyId,{location:"highlights-section:HighlightsSectionV2:handleLike",storyId:p.storyId,title:p.title||"",wasAlreadyLiked:String("liked"===T)}),s.likeStory(p.storyId)},[p.storyId,p.title,T,_]),V=(0,j.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),!p.storyId)return;let s=k.useHighlightsStore.getState();_("highlight_story_disliked",p.storyId,{location:"highlights-section:HighlightsSectionV2:handleDislike",storyId:p.storyId,title:p.title||"",wasAlreadyDisliked:String("disliked"===T)}),s.dislikeStory(p.storyId)},[p.storyId,p.title,T,_]),Q=(0,j.useCallback)(e=>{_("highlights_post_link_clicked",e,{location:"highlights-section:HighlightsSectionV2:handlePostClick",storyId:p.storyId||"",postId:e})},[p.storyId,_]);return(0,s.jsxs)("section",{ref:C,id:p.storyId||void 0,className:(0,I.cn)("w-full scroll-mt-4",d.QUERY_BAR_MAX_WIDTH_CLASS,f),children:[(0,s.jsx)("h2",{className:"text-primary font-semibold text-3xl mb-2 m-0",children:p.title}),p.summary&&(0,s.jsx)("p",{className:"mb-4 m-0",children:p.summary}),(X||R)&&!G&&(0,s.jsxs)("div",{className:"relative w-full mb-4 rounded-2xl overflow-hidden",children:[R&&!X?(0,s.jsx)(g.Skeleton,{className:"w-full aspect-video"}):null,X&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:X,alt:"","aria-hidden":"true",className:(0,I.cn)("absolute inset-0 w-full h-full object-cover blur-3xl scale-110 opacity-60",!U&&"invisible")}),(0,s.jsx)("img",{src:X,alt:p.title||w("highlights-story-image","Story image"),className:(0,I.cn)("relative w-full h-auto max-h-[500px] object-contain",!U&&"invisible absolute"),onLoad:()=>z(!0),onError:()=>O(!0)})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 text-secondary text-sm",children:F&&(0,s.jsx)("span",{children:F})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:W,className:(0,I.cn)("liked"===T&&"text-primary"),"aria-label":w("highlights-like-story","Like this story"),children:(0,s.jsx)(n.ThumbsUpIcon,{className:"size-4"})}),(0,s.jsx)(u.Button,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:V,className:(0,I.cn)("disliked"===T&&"text-primary"),"aria-label":w("highlights-dislike-story","Dislike this story"),children:(0,s.jsx)(a.ThumbsDownIcon,{className:"size-4"})})]})]}),S?(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(N.MessageBubble,{isUser:!1,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-4/5"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-3/4"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-2/3"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-4/5"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(g.Skeleton,{className:"h-5 w-3/4"})]})})}):(null==(l=p.article)?void 0:l.content)||p.grokAnalysis?(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(N.MessageBubble,{isUser:!1,children:(0,s.jsx)(t.MemoizedMarkdown,{sender:"assistant",shouldRenderHtml:!0,webSearchResults:null==(o=p.article)?void 0:o.webResults,xposts:null==(c=p.article)?void 0:c.xPosts,cardAttachmentsJson:null==(h=p.article)?void 0:h.cardAttachments,children:(null==(m=p.article)?void 0:m.content)||p.grokAnalysis||""})})}):null,D.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[!A&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:"w-full my-2 border-border-l1"}),(0,s.jsx)("h3",{className:"text-xl font-bold",children:w("highlights.more-on-this-story","More on this story")})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"flex flex-col overflow-hidden items-center",children:(0,s.jsx)(i.XPostFeed,{xPosts:D,mode:"card",onPostClick:e=>Q(e)})})})]}),(null==(x=p.article)?void 0:x.followUpSuggestions)&&p.article.followUpSuggestions.length>0&&(0,s.jsx)(M,{followups:p.article.followUpSuggestions,storyId:p.storyId})]})}function M(e){let{followups:t,storyId:i}=e,{t:r}=(0,b.useTranslation)("chat"),o=(0,y.useLogEvent)(),a=(0,j.useCallback)((e,s)=>{o("highlights_followup_clicked",String(s),{location:"highlights-story-card:HighlightsFollowups:click",storyId:i||"",label:e.label||""}),window.dispatchEvent(new CustomEvent("highlightFollowupClicked",{detail:{followup:e,storyId:i}}))},[o,i]);return(0,s.jsxs)("div",{className:"mt-8 mb-6",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-secondary mb-3",children:r("highlights.followups-title","Related questions")}),(0,s.jsx)("div",{className:"flex flex-col gap-1 items-start w-full",children:t.map((e,t)=>(0,s.jsxs)(u.Button,{variant:"ghost",className:"-ms-4",onClick:()=>a(e,t),children:[(0,s.jsx)(l.CornerDownRight,{size:16,className:"text-secondary opacity-60"}),(0,s.jsx)("span",{className:"line-clamp-1",children:e.label})]},"followup-".concat(t)))})]})}},796066,e=>{"use strict";e.s(["useLoadHighlights",()=>l]);var s=e.i(421593),t=e.i(572848),i=e.i(676452),r=e.i(50636);function l(){let e=(0,t.useSession)().user,l=(0,r.useFeatureFlags)(),o=(0,i.useHighlightsStore)(e=>e.isLoading),a=(0,i.useHighlightsStore)(e=>e.error);return(0,s.useEffect)(()=>{if(!l.ALLOW_HIGHLIGHTS_ACCESS_WEB)return;let s=i.useHighlightsStore.getState();s.stories.length>=10||e&&!s.isLoading&&s.fetchStories(10).catch(e=>{})},[e,l.ALLOW_HIGHLIGHTS_ACCESS_WEB]),{isLoading:o,error:a}}},829735,844858,e=>{"use strict";e.s(["HighlightsAllStoriesPage",()=>z,"default",()=>U],829735);var s=e.i(247276),t=e.i(421593);e.i(18545);var i=e.i(116212),r=e.i(211959),l=e.i(486492),o=e.i(920958),a=e.i(235289),n=e.i(676452),c=e.i(796066),d=e.i(398459),h=e.i(724499),u=e.i(258722);e.i(685846);var g=e.i(680491),m=e.i(763578),x=e.i(380619),y=e.i(246429),f=e.i(389052),p=e.i(892621);e.s(["ArrowLeft",()=>v.default],844858);var v=e.i(935622),v=v,S=e.i(383293),I=e.i(383274),j=e.i(572848),b=e.i(443696),N=e.i(410289),k=e.i(938270),w=e.i(713087),_=e.i(50636),C=e.i(489843),H=e.i(328788),L=e.i(243634),E=e.i(157695),A=e.i(230433),T=e.i(805546),P=e.i(470753),R=e.i(712548),M=e.i(112089);function B(){var e;let{t:c}=(0,i.useTranslation)("chat"),g=(0,R.useParams)(),{route:m}=(0,h.useRouting)(),B=("highlights"===m.page||"trends"===m.page)&&m.storyId||(null==g?void 0:g.id),D="trends"===m.page?"HIGHLIGHTS_SOURCE_PHOENIX":"HIGHLIGHTS_SOURCE_HIGHLIGHTS",U="HIGHLIGHTS_SOURCE_HIGHLIGHTS"===D,z=(0,o.useLogEvent)(),{user:G}=(0,j.useSession)(),O=(0,I.useMaybeRefreshAnonSession)(),{signInWithReturnTo:F}=(0,w.useGrokRouter)(),X=(0,L.useForceSignInModels)(),W=(0,_.useFeatureFlags)(),V=(0,P.useSettingsStore)(e=>e.isIncognito),Q=(0,H.useMobileSize)(),{bestSubscription:q}=(0,A.useSubscriptions)(),K=(0,T.useIsFirstTimeUser)(),Y=(0,n.useHighlightsStore)((0,t.useCallback)(e=>{let s=e.mergedStoryIds[B]||B;return e.stories.find(e=>e.storyId===s)},[B])),J=(0,n.useHighlightsStore)(e=>e.getStory),Z=(0,t.useMemo)(()=>B?J(B,D):void 0,[J,B,D]),{isLoading:$,isUninitialized:ee,error:es}=(0,E.usePromise)(Z),et=($||ee)&&!Y,ei=U&&($||ee)&&!(null==Y||null==(e=Y.article)?void 0:e.content),{data:er=[]}=(0,M.useSourcePosts)(B,D),{data:el=[]}=(0,M.useEngagingPosts)(B,D),{sessionStartTime:eo,conversationDepth:ea}=(0,p.useTimeToValueAnalytics)();(0,t.useEffect)(()=>{Y&&z("highlight_story_page_view",B,{location:"highlight-story-page",storyId:B,title:Y.title||""})},[Y,B,z]);let en=(0,t.useCallback)(e=>{let{query:s,fileAttachmentIds:t,toolOverrides:i,workspaceIds:r,persona:o,isIncognitoOverride:a,disableMemory:n,modelIdOverride:c}=e;if(!s||!s.trim()||!Y)return Promise.resolve(!1);let d=y.useChatPageStore.getState(),h=P.useSettingsStore.getState(),g=u.useRoutingStore.getState();return!G&&X.includes(d.activeModelId)?(z("sign_in","highlight-story-page",{location:"highlight-story-page:handleSend"}),F(s),Promise.resolve(!1)):O().then(()=>{let e=(0,f.toAnalytics)({activeModelId:c||d.activeModelId,modelMode:c?"":void 0,query:s,fileAttachmentIds:t,location:"highlight-story-page",personalityId:h.userSettings.preferences.selectedSystemPromptId||"",personaId:"",sessionStartTime:eo,conversationDepth:ea,isMobile:Q,bestSubscription:q,user:!!G,workspaceCount:(null==r?void 0:r.length)||0,toolOverrides:i,parentResponseId:"",isFirstTimeUser:K}),u=s,m=er.map(e=>e.postId),x=el.slice(0,2).map(e=>"@".concat(e.username,": ").concat(e.text));u=[Y.title&&"Story: ".concat(Y.title),x&&x.length>0&&"Popular responses: ".concat(x.join(" | ")),!(null==x?void 0:x.length)&&Y.summary&&"Summary: ".concat(Y.summary),m.length>0&&"X posts: ".concat(m.join(", ")),s].filter(Boolean).join("\n\n"),z("send_query","",e);let y=null!=a?a:V,p={storyId:Y.storyId||"",title:Y.title,thumbnailImageUrl:Y.thumbnailImageUrl||Y.coverImageUrl,userQuery:s,fullMessage:u};return d.establishNewConversation({message:s,highlightsStory:p,fileAttachmentIds:t,toolOverrides:i,temporary:y,enableRetries:!0,ff:W,persona:o,disableMemory:n,onOptimisticConversation:()=>{g.push({page:"main"})}}).catch((0,l.createLogError)("highlight-story-page:establishNewConversation")).then(e=>!!e)})},[G,X,O,z,F,eo,ea,Q,q,K,er,el,Y,V,W]);(0,t.useEffect)(()=>{let e=e=>{let{followup:s}=e.detail,t=s.label;t&&en({query:t}).catch(()=>{})};return window.addEventListener("highlightFollowupClicked",e),()=>{window.removeEventListener("highlightFollowupClicked",e)}},[en]);let ec=(0,t.useCallback)(()=>{(0,u.useRoutingStore.getState().push)({page:"main"})},[]),ed=(0,t.useCallback)(()=>{u.useRoutingStore.getState().requestMainPageReset(),u.useRoutingStore.getState().push({page:"main"})},[]);(0,C.useHotkeys)(k.KBD_NEW_CHAT,ed,[ed]);let eh=(0,t.useCallback)(()=>{G&&(P.useSettingsStore.getState().setIsIncognito(!0),ed())},[G,ed]);return((0,C.useHotkeys)(k.KBD_NEW_INCOGNITO_CHAT,eh,[eh]),et&&!Y)?(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col items-center w-full h-[100vh]",x.CHAT_CONTAINER_CLASSES),children:(0,s.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:(0,s.jsxs)("div",{className:(0,r.cn)("w-full",a.QUERY_BAR_MAX_WIDTH_CLASS,"mx-auto px-4"),children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 pt-3 pb-2 bg-gradient-to-b from-surface-base via-surface-base to-transparent",children:(0,s.jsx)(b.Button,{variant:"tertiary",size:"md",shape:"circle",onClick:ec,className:"shrink-0","aria-label":c("highlights-detail-page.back","Back"),children:(0,s.jsx)(v.default,{size:20})})}),(0,s.jsxs)("div",{className:"pt-3",children:[(0,s.jsx)(N.Skeleton,{className:"w-full aspect-video rounded-2xl mb-6"}),(0,s.jsx)(N.Skeleton,{className:"h-8 w-4/5 mb-2"}),(0,s.jsxs)("div",{className:"space-y-1.5 mb-4",children:[(0,s.jsx)(N.Skeleton,{className:"h-5 w-full"}),(0,s.jsx)(N.Skeleton,{className:"h-5 w-3/4"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Skeleton,{className:"size-8 rounded-full"}),(0,s.jsx)(N.Skeleton,{className:"size-8 rounded-full"})]}),(0,s.jsx)(N.Skeleton,{className:"h-4 w-32"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.Skeleton,{className:"w-full h-32 rounded-xl"}),(0,s.jsx)(N.Skeleton,{className:"w-full h-32 rounded-xl"})]})]})]})})}):es||!Y?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full p-8",children:(0,s.jsx)("div",{className:(0,r.cn)("w-full",a.QUERY_BAR_MAX_WIDTH_CLASS),children:(0,s.jsx)("p",{className:"text-secondary text-center",children:c("highlight-not-found","Highlight story not found.")})})}):(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center w-full h-[100vh]",x.CHAT_CONTAINER_CLASSES),children:[(0,s.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:(0,s.jsxs)("div",{className:(0,r.cn)("w-full",a.QUERY_BAR_MAX_WIDTH_CLASS,"mx-auto px-4 relative"),children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 pt-3 pb-2 bg-gradient-to-b from-surface-base via-surface-base to-transparent",children:(0,s.jsx)(b.Button,{variant:"tertiary",size:"md",shape:"circle",onClick:ec,className:"shrink-0","aria-label":c("highlights-detail-page.back","Back"),children:(0,s.jsx)(v.default,{size:20})})}),(0,s.jsx)(d.HighlightsSectionSimple,{className:"pt-3",story:Y,isArticleLoading:ei}),(0,s.jsx)("div",{className:"h-32"})]})}),(0,s.jsxs)("div",{className:(0,r.cn)("absolute bottom-4 w-full"),children:[(0,s.jsx)(S.QueryBar,{placeholder:c("highlights-story-page-query-bar.input-placeholder","Ask about the story..."),onQuery:en,onFrontPage:!0,isIncognito:V,textAreaClassName:"min-h-14 py-4 my-0 mb-0"}),(0,s.jsx)("div",{className:"absolute -bottom-4 h-14 w-full",children:(0,s.jsx)("div",{className:(0,r.cn)("chat-input-backdrop w-full h-full","bg-gradient-to-b from-surface-base via-surface-base/94 to-surface-base/80")})})]})]})}function D(e){let{children:t}=e,i=(0,u.useRoutingStore)(e=>e.push);return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center w-full h-[100vh] overflow-y-auto",x.CHAT_CONTAINER_CLASSES),children:[(0,s.jsx)(m.Button,{variant:"outline",size:"iconMd",rounded:!0,onClick:()=>i({page:"main"}),className:"shrink-0 mt-2 ms-2 self-start sticky top-2",children:(0,s.jsx)(g.ChevronLeft,{className:"size-4"})}),(0,s.jsx)("div",{className:(0,r.cn)("w-full",a.QUERY_BAR_MAX_WIDTH_CLASS),children:t})]})}function U(){let{route:e}=(0,h.useRouting)();return("highlights"===e.page||"trends"===e.page)&&e.storyId?(0,s.jsx)(B,{}):(0,s.jsx)(z,{})}function z(){let{t:e}=(0,i.useTranslation)("chat"),{route:r}=(0,h.useRouting)(),a=(0,n.useHighlightsStore)(e=>e.stories),{isLoading:u,error:g}=(0,c.useLoadHighlights)(),m=(0,o.useLogEvent)();return((0,t.useEffect)(()=>{a.length>0&&m("highlights_shown",String(a.length),{location:"highlights-page:HighlightsAllStoriesView",storyCount:String(a.length)})},[a.length,m]),(0,t.useEffect)(()=>{if(("highlights"===r.page||"trends"===r.page)&&r.storyId){let e=setTimeout(()=>{let e=r.storyId;if(e){let s=document.getElementById(e);s?s.scrollIntoView({behavior:"smooth",block:"start"}):(0,l.logError)("highlights-page:scroll",Error("Story element not found: ".concat(e)))}},100);return()=>clearTimeout(e)}},[r]),u&&0===a.length)?(0,s.jsx)(D,{children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full p-8",children:(0,s.jsx)("p",{className:"text-secondary text-center",children:e("highlights-loading","Loading highlights...")})})}):g?(0,s.jsx)(D,{children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full p-8",children:(0,s.jsx)("p",{className:"text-secondary text-center",children:e("highlights-error","Failed to load highlights. Please try again later.")})})}):0===a.length?(0,s.jsx)(D,{children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full p-8",children:(0,s.jsx)("p",{className:"text-secondary text-center",children:e("highlights-empty","No highlights available at the moment.")})})}):(0,s.jsx)(D,{children:(0,s.jsx)("div",{className:"flex flex-col gap-10",children:a.map(e=>(0,s.jsx)(d.HighlightsSection,{story:e},e.storyId))})})}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3279f59b-62cd-5f74-96e1-3b13918311ee")}catch(e){}}();
//# debugId=3279f59b-62cd-5f74-96e1-3b13918311ee
